<!--
  Can you predict what happens when you click on "4"?

  A - We'll see alerts for the d1, d2 and d4 boxes, in that sequence, but none for the d3 box since we don't have an event listener for it.
 -->

<!--
   If we add the following line of code, what will happen?

   document.querySelector('.d3').addEventListener('click', highlightThis, false);

   A- The new event handler on d3 fires last since we defined it on the bubbling phase.

  -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .d1 {
      background-color: green;
      position: relative;
      width: 200px;
      height: 200px;
      text-align: center;
      cursor: pointer;
    }

    .d2 {
      background-color: blue;
      position: absolute;
      top: 25px;
      left: 25px;
      width: 150px;
      height: 150px;
    }

    .d3 {
      background-color: red;
      position: absolute;
      top: 25px;
      left: 25px;
      width: 100px;
      height: 100px;
      line-height: 25px;
    }

    .d4 {
      background-color: yellow;
      position: absolute;
      top: 25px;
      left: 25px;
      width: 50px;
      height: 50px;
      line-height: 50px;
    }
  </style>
</head>

<body>

  <body>
    <div class="d1 pick">1
      <main class="d2 pick">2
        <div class="d3">3
          <section class="d4 pick">4
          </section>
        </div>
      </main>
    </div>
    <script>

      //document.querySelector('.d3').addEventListener('click', highlightThis, false);
      //two phases for every event: first it goes through the capturing phase calling each handler that is set to be handled during the capture phase, then the currentTarget fires, and finally the bubbling phase occurs, with each handler that is set to be handled during the bubble phase. Note that changing which phase an even is handle by does not effect the rest of the events. The process goes from the top-down during the capture phase, and bottom-up during the bubble phase. Thus, events fire in this order: d1 (capture), d2 (capture), d4 (capture), d3 (bubble).

      let divs = document.querySelectorAll('.pick');

      for (let index = 0; index < divs.length; index += 1) {
        divs[index].addEventListener('click', highlightThis, true);
      }

      function highlightThis(e) {
        alert(`${this.className} ${e.currentTarget.tagName}`);
      }
    </script>
  </body>
</body>

</html>
